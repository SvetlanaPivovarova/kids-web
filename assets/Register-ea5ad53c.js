import{_ as f,H as w,P as x,A as E,a as I,b as v,r as u,o as C,c as R,d as c,e,w as a,v as n,n as l,t as m,f as h,g as y,F as N}from"./index-d4af763c.js";const L={name:"Register",components:{Header:w},data(){return{email:"",password:"",name:"",errorEmail:null,errorPassword:null,errorName:null,emailInputClass:"input-text",codeInputClass:"input-text",isLoggedIn:!1}},computed:{isEmailValid(){return x.EMAIL.test(this.email)}},watch:{email(){this.emailInputClass="input-text",this.errorEmail=null},isLoggedIn(){this.$emit("sendIsLoggedIn",this.isLoggedIn)}},methods:{handleRegister(){this.signUpRequest(this.email,this.password,this.name)},async signUpRequest(d,t,p){try{await fetch(`${E}/signup`,{method:"POST",body:JSON.stringify({email:d,password:t,name:p}),headers:I}).then(r=>r.json()).then(r=>{console.log(r),v(this.email,this.password).catch(()=>{this.codeInputClass="input-text input-text_type_error"})})}catch(r){this.emailInputClass="input-text input-text_type_error",this.errorEmail="NetworkError when attempting to fetch resource",r.status===406?this.errorEmail="Пользователь с указанным email не существует":r.status===429?this.errorEmail="Сервер загружен, попробуйте еще раз позже":this.errorEmail="NetworkError when attempting to fetch resource"}}}},V={class:"form"},b=e("h2",{class:"form__heading"},"Добро пожаловать!",-1),k={class:"form__wrapper"},P={class:"form-control"},U={class:"input-text__error-message"},A={class:"form-control"},H={class:"input-text__error-message"},S={class:"form-control"},T={class:"input-text__error-message"},B=["disabled"],D={class:"input-text__message"};function q(d,t,p,r,s,i){const _=u("Header"),g=u("RouterLink");return C(),R(N,null,[c(_),e("div",V,[b,e("div",k,[e("div",P,[a(e("input",{class:l(s.emailInputClass),type:"email",id:"e-mail",placeholder:"Email","onUpdate:modelValue":t[0]||(t[0]=o=>s.email=o)},null,2),[[n,s.email,void 0,{trim:!0}]]),e("span",U,m(s.errorEmail),1)]),e("div",A,[a(e("input",{class:l(s.emailInputClass),type:"password",id:"password",placeholder:"Password","onUpdate:modelValue":t[1]||(t[1]=o=>s.password=o)},null,2),[[n,s.password,void 0,{trim:!0}]]),e("span",H,m(s.errorPassword),1)]),e("div",S,[a(e("input",{class:l(s.emailInputClass),type:"text",id:"name",placeholder:"Name","onUpdate:modelValue":t[2]||(t[2]=o=>s.name=o)},null,2),[[n,s.name,void 0,{trim:!0}]]),e("span",T,m(s.errorName),1)]),e("button",{class:"button button_type_medium",onClick:t[3]||(t[3]=(...o)=>i.handleRegister&&i.handleRegister(...o)),disabled:!i.isEmailValid||!this.password||!this.name}," Зарегистрироваться ",8,B)]),e("div",D,[h("Уже зарегистрированы? "),c(g,{to:"/login"},{default:y(()=>[h("Войти")]),_:1})])])],64)}const F=f(L,[["render",q]]);export{F as default};
